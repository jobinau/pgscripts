#Generated using the following command 
# kubectl get postgresclusters hippo-s3 -o yaml > Crunchy_pgclsuter_cr.yml
# Consider only the "spec" section for reference
apiVersion: postgres-operator.crunchydata.com/v1beta1
kind: PostgresCluster
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"postgres-operator.crunchydata.com/v1beta1","kind":"PostgresCluster","metadata":{"annotations":{},"name":"hippo-s3","namespace":"crunchypgo"},"spec":{"backups":{"pgbackrest":{"configuration":[{"secret":{"name":"pgo-s3-creds"}}],"global":{"repo1-path":"/pgbackrest/postgres-operator/hippo-s3/repo1","repo1-s3-uri-style":"path"},"repos":[{"name":"repo1","s3":{"bucket":"pg2","endpoint":"localhost:9000","region":""}}]}},"instances":[{"dataVolumeClaimSpec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}}}}],"postgresVersion":17}}
  creationTimestamp: "2025-12-13T14:16:03Z"
  finalizers:
  - postgres-operator.crunchydata.com/finalizer
  generation: 11
  name: hippo-s3
  namespace: crunchypgo
  resourceVersion: "339833"
  uid: 565b04d3-2baf-4b20-a43e-f8ff6c451cce
spec:
  backups:
    pgbackrest:
      configuration:
      - secret:
          name: pgo-s3-creds
      global:
        archive-async: "y"
        compress-type: gz
        process-max: "4"
        repo1-bundle: "y"
        repo1-bundle-limit: 100MiB
        repo1-bundle-size: 200MiB
        repo1-path: /pgbackrest/postgres-operator/hippo-s3/repo1
        repo1-retention-full: "2"
        repo1-retention-full-type: count
        repo1-s3-uri-style: path
        repo1-s3-verify-tls: "n"
        spool-path: /pgdata
      repos:
      - name: repo1
        s3:
          bucket: pg2
          endpoint: 192.168.48.1:9000
          region: us-east-1
        schedules:
          full: '*/10 * * * *'
  instances:
  - dataVolumeClaimSpec:
      accessModes:
      - ReadWriteOnce
      resources:
        requests:
          storage: 1Gi
    name: ""
    replicas: 2
  port: 5432
  postgresVersion: 17
  proxy:
    pgBouncer:
      config:
        global:
          pool_mode: transaction
      port: 5432
      replicas: 3
      service:
        type: LoadBalancer
  service:
    type: LoadBalancer
status:
  conditions:
  - lastTransitionTime: "2025-12-16T04:59:51Z"
    message: pgBackRest replica create repo is ready for backups
    observedGeneration: 11
    reason: StanzaCreated
    status: "True"
    type: PGBackRestReplicaRepoReady
  - lastTransitionTime: "2025-12-16T05:00:06Z"
    message: pgBackRest replica creation is now possible
    observedGeneration: 11
    reason: RepoBackupComplete
    status: "True"
    type: PGBackRestReplicaCreate
  - lastTransitionTime: "2025-12-18T06:30:30Z"
    message: Deployment has minimum availability.
    observedGeneration: 11
    reason: MinimumReplicasAvailable
    status: "True"
    type: ProxyAvailable
  databaseRevision: cf65676f7
  instances:
  - name: "00"
    readyReplicas: 2
    replicas: 2
    updatedReplicas: 2
  monitoring:
    exporterConfiguration: 559c4c97d6
  observedGeneration: 11
  patroni:
    systemIdentifier: "7583346386943422552"
  pgbackrest:
    repos:
    - name: repo1
      replicaCreateBackupComplete: true
      repoOptionsHash: f5c58f6bf
      stanzaCreated: true
    scheduledBackups:
    - cronJobName: hippo-s3-repo1-full
      failed: 7
      repo: repo1
      startTime: "2025-12-18T02:57:26Z"
      type: full
    - completionTime: "2025-12-18T06:24:07Z"
      cronJobName: hippo-s3-repo1-full
      failed: 3
      repo: repo1
      startTime: "2025-12-18T05:18:41Z"
      succeeded: 1
      type: full
    - completionTime: "2025-12-18T06:24:14Z"
      cronJobName: hippo-s3-repo1-full
      repo: repo1
      startTime: "2025-12-18T06:24:07Z"
      succeeded: 1
      type: full
    - completionTime: "2025-12-18T06:30:11Z"
      cronJobName: hippo-s3-repo1-full
      repo: repo1
      startTime: "2025-12-18T06:30:00Z"
      succeeded: 1
      type: full
  proxy:
    pgBouncer:
      postgresRevision: f7969986
      readyReplicas: 3
      replicas: 3
  usersRevision: 695b569c5f
